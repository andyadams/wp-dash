/**
 * @license
 * Fuse - Lightweight fuzzy-search
 *
 * Copyright (c) 2012 Kirollos Risk <kirollos@gmail.com>.
 * All Rights Reserved. Apache Software License 2.0
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){function e(t,n){this.list=t,this.options=n=n||{};var o,i,r;for(o=0,keys=["sort","includeScore","shouldSort"],i=keys.length;i>o;o++)r=keys[o],this.options[r]=r in n?n[r]:e.defaultOptions[r];for(o=0,keys=["searchFn","sortFn","keys","getFn"],i=keys.length;i>o;o++)r=keys[o],this.options[r]=n[r]||e.defaultOptions[r]}var n=function(t,e){if(e=e||{},this.options=e,this.options.location=e.location||n.defaultOptions.location,this.options.distance="distance"in e?e.distance:n.defaultOptions.distance,this.options.threshold="threshold"in e?e.threshold:n.defaultOptions.threshold,this.options.maxPatternLength=e.maxPatternLength||n.defaultOptions.maxPatternLength,this.pattern=e.caseSensitive?t:t.toLowerCase(),this.patternLen=t.length,this.patternLen>this.options.maxPatternLength)throw new Error("Pattern length is too long");this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet()};n.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},n.prototype._calculatePatternAlphabet=function(){var t={},e=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]|=1<<this.pattern.length-e-1;return t},n.prototype._bitapScore=function(t,e){var n=t/this.patternLen,o=Math.abs(this.options.location-e);return this.options.distance?n+o/this.options.distance:o?1:n},n.prototype.search=function(t){if(t=this.options.caseSensitive?t:t.toLowerCase(),this.pattern===t)return{isMatch:!0,score:0};var e,n,o,i,r,s,a,h,c,p=t.length,u=this.options.location,l=this.options.threshold,f=t.indexOf(this.pattern,u),d=this.patternLen+p,y=1,m=[];for(-1!=f&&(l=Math.min(this._bitapScore(0,f),l),f=t.lastIndexOf(this.pattern,u+this.patternLen),-1!=f&&(l=Math.min(this._bitapScore(0,f),l))),f=-1,e=0;e<this.patternLen;e++){for(o=0,i=d;i>o;)this._bitapScore(e,u+i)<=l?o=i:d=i,i=Math.floor((d-o)/2+o);for(d=i,r=Math.max(1,u-i+1),s=Math.min(u+i,p)+this.patternLen,a=Array(s+2),a[s+1]=(1<<e)-1,n=s;n>=r;n--)if(c=this.patternAlphabet[t.charAt(n-1)],a[n]=0===e?(a[n+1]<<1|1)&c:(a[n+1]<<1|1)&c|((h[n+1]|h[n])<<1|1)|h[n+1],a[n]&this.matchmask&&(y=this._bitapScore(e,n-1),l>=y)){if(l=y,f=n-1,m.push(f),!(f>u))break;r=Math.max(1,2*u-f)}if(this._bitapScore(e+1,u)>l)break;h=a}return{isMatch:f>=0,score:y}};var o={deepValue:function(t,e){for(var n=0,e=e.split("."),o=e.length;o>n;n++){if(!t)return null;t=t[e[n]]}return t}};e.defaultOptions={id:null,caseSensitive:!1,includeScore:!1,shouldSort:!0,searchFn:n,sortFn:function(t,e){return t.score-e.score},getFn:o.deepValue,keys:[]},e.prototype.search=function(t){var e,n,i,r,s,a=new this.options.searchFn(t,this.options),h=this.list,c=h.length,p=this.options,u=this.options.keys,l=u.length,f=[],d={},y=[],m=function(t,e,n){void 0!==t&&null!==t&&"string"==typeof t&&(r=a.search(t),r.isMatch&&(s=d[n],s?s.score=Math.min(s.score,r.score):(d[n]={item:e,score:r.score},f.push(d[n]))))};if("string"==typeof h[0])for(var e=0;c>e;e++)m(h[e],e,e);else for(var e=0;c>e;e++)for(i=h[e],n=0;l>n;n++)m(this.options.getFn(i,u[n]),i,e);p.shouldSort&&f.sort(p.sortFn);for(var g=p.includeScore?function(t){return f[t]}:function(t){return f[t].item},v=p.id?function(t){return o.deepValue(g(t),p.id)}:function(t){return g(t)},e=0,k=f.length;k>e;e++)y.push(v(e));return y},"object"==typeof exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.Fuse=e}(this),function(t,e,n){function o(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function i(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return d[t.which]?d[t.which]:y[t.which]?y[t.which]:String.fromCharCode(t.which).toLowerCase()}function r(t){t=t||{};var e=!1,n;for(n in w)t[n]?e=!0:w[n]=0;e||(M=!1)}function s(t,e,n,o,i,r){var s,a,h=[],c=n.type;if(!k[t])return[];for("keyup"==c&&p(t)&&(e=[t]),s=0;s<k[t].length;++s)if(a=k[t][s],!(!o&&a.seq&&w[a.seq]!=a.level||c!=a.action||("keypress"!=c||n.metaKey||n.ctrlKey)&&e.sort().join(",")!==a.modifiers.sort().join(","))){var u=o&&a.seq==o&&a.level==r;(!o&&a.combo==i||u)&&k[t].splice(s,1),h.push(a)}return h}function a(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function h(t,e,n,o){x.stopCallback(e,e.target||e.srcElement,n,o)||!1!==t(e,n)||(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)}function c(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=i(t);e&&("keyup"==t.type&&S===e?S=!1:x.handleKey(e,a(t),t))}function p(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function u(t,e,n,o){function s(e){return function(){M=e,++w[t],clearTimeout(L),L=setTimeout(r,1e3)}}function a(e){h(n,e,t),"keyup"!==o&&(S=i(e)),setTimeout(r,10)}for(var c=w[t]=0;c<e.length;++c){var p=c+1===e.length?a:s(o||l(e[c+1]).action);f(e[c],p,o,t,c)}}function l(t,e){var n,o,i,r=[];for(n="+"===t?["+"]:t.split("+"),i=0;i<n.length;++i)o=n[i],g[o]&&(o=g[o]),e&&"keypress"!=e&&m[o]&&(o=m[o],r.push("shift")),p(o)&&r.push(o);if(n=o,i=e,!i){if(!v){v={};for(var s in d)s>95&&112>s||d.hasOwnProperty(s)&&(v[d[s]]=s)}i=v[n]?"keydown":"keypress"}return"keypress"==i&&r.length&&(i="keydown"),{key:o,modifiers:r,action:i}}function f(t,e,n,o,i){b[t+":"+n]=e,t=t.replace(/\s+/g," ");var r=t.split(" ");1<r.length?u(t,r,e,n):(n=l(t,n),k[n.key]=k[n.key]||[],s(n.key,n.modifiers,{type:n.action},o,t,i),k[n.key][o?"unshift":"push"]({callback:e,modifiers:n.modifiers,action:n.action,seq:o,level:i,combo:t}))}var d={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},y={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},m={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},g={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},v,k={},b={},w={},L,S=!1,P=!1,M=!1;for(n=1;20>n;++n)d[111+n]="f"+n;for(n=0;9>=n;++n)d[n+96]=n;o(e,"keypress",c),o(e,"keydown",c),o(e,"keyup",c);var x={bind:function(t,e,n){t=t instanceof Array?t:[t];for(var o=0;o<t.length;++o)f(t[o],e,n);return this},unbind:function(t,e){return x.bind(t,function(){},e)},trigger:function(t,e){return b[t+":"+e]&&b[t+":"+e]({},t),this},reset:function(){return k={},b={},this},stopCallback:function(t,e){return-1<(" "+e.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},handleKey:function(t,e,n){var o=s(t,e,n),i;e={};var a=0,c=!1;for(i=0;i<o.length;++i)o[i].seq&&(a=Math.max(a,o[i].level));for(i=0;i<o.length;++i)o[i].seq?o[i].level==a&&(c=!0,e[o[i].seq]=1,h(o[i].callback,n,o[i].combo,o[i].seq)):c||h(o[i].callback,n,o[i].combo);o="keypress"==n.type&&P,n.type!=M||p(t)||o||r(e),P=c&&"keydown"==n.type}};t.Mousetrap=x,"function"==typeof define&&define.amd&&define(x)}(window,document);